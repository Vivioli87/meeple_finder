{% extends "base.html" %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/games.css') }}" type="text/css">
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col s12">
            <div class="card-panel custom-teal-text center-align">
                <h2 class="welcome-text">Welcome to Meeple Finder</h2>
                <h4 class="welcome-text">Where meeting Meeples is easy....</h4>
                <p class="bigger-p-text">Add games to your collection, leave reviews on your favourites or find new games to add to your wishlist!</p>
            </div>
        </div>
    </div>

    <h3 class="custom-teal-text padding"><i class="fas fa-dice"></i> <span class="underline">Games List:</span></h3>
    <!--Search bar-->
    <div class="row card-panel search-bar custom-teal-text center-align">
        <form action="{{ url_for('search') }}" method="POST" class="col s12">
            <div class="row valign-wrapper">
                <div class="input-field col s12 m8">
                    <i class="fas fa-search prefix"></i>
                    <input type="text" name="query" id="query" minlength="3" class="validate" required>
                    <label for="query">Search Games</label>
                </div>
                <div class="col s12 m4">
                    <button type="submit" class=" btn-small teal text-shadow">
                        <i class="fas fa-search left"></i> Search
                    </button>
                    <a href="{{ url_for('get_games') }}" class="blue accent-3 btn-small text-shadow">Show all Games</a>
                </div>
            </div>
        </form>
        <p><em>*Searches across Name, Description, Game Mechanisms and Themes</em></p>
    </div>

    <div class="row">
        <!--populates games in game list-->
        {% for game in games %}
            <div class="col s12 m4 l3">
                <div class="card game-list-size">
                    <div class="card-image">
                        {% if game.image == "" %}
                            <img src="https://www.logolynx.com/images/logolynx/s_33/33d3b4fb44abf51ee337cff414cbaecd.jpeg">
                        {% else %}
                            <img src="{{game.image}}">
                        {% endif %}
                    </div>
                    <div class="card-stacked">
                        <div class="card-content center-align">
                            <h6 class="custom-teal-text underline"><strong>{{game.name|upper}}</strong></h6>
                            <p>{{game.description|truncate(100)}}</p><br>
                            <a href="{{ url_for('get_game_detail', game_id=game._id) }}" class="btn-small teal">More Info / Leave a Review</a>
                        </div>
                        <!--different actions on game card if logged in or not-->
                        {% if session.user %}
                            <div class="card-action center-align">
                                {% if username == "admin" %}
                                    <a  class="btn-small teal text-shadow" href="{{ url_for('edit_game', game_id=game._id) }}"> 
                                        Update/Delete Game<i class="fas fa-edit right"></i>
                                    </a>
                                {% else %}
                                    <a href="{{ url_for('add_to_collection', game_id=game._id) }}" class="teal-text darken-2"><i class="fas fa-plus-circle"></i>  Add to Collection</a>
                                    <br>
                                    <a href="{{ url_for('add_to_wishlist', game_id=game._id) }}" class="teal-text darken-2"><i class="fas fa-heart"></i>  Add to Wishlist</a>
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    <!--Pagination links-->

    {{ pagination.links }}  
    
{% endblock %}
